# æœåŠ¡ç«¯æµ‹è¯•æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥: å®‰è£…ä¾èµ–

```bash
cd server
npm install
```

**é¢„æœŸè¾“å‡º**:
```
added XXX packages in XXs
```

### ç¬¬äºŒæ­¥: åˆå§‹åŒ–æ•°æ®åº“

```bash
npm run db:migrate
```

**é¢„æœŸè¾“å‡º**:
```
âœ” Generated Prisma Client (X.X.X) to ./node_modules/@prisma/client in XXms
âœ” Your database has been successfully migrated
```

### ç¬¬ä¸‰æ­¥: ç§å­æ•°æ®

```bash
npm run db:seed
```

**é¢„æœŸè¾“å‡º**:
```
âœ” Seeding database...
âœ” Created company: Cypridina Pro
âœ” Created admin user: admin@example.com
âœ” Created customers
âœ” Created products
âœ” Created inventory
âœ” Created sales invoice
```

### ç¬¬å››æ­¥: å¯åŠ¨æœåŠ¡

```bash
npm run dev
```

**é¢„æœŸè¾“å‡º**:
```
[æœåŠ¡å™¨] æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000
[æ•°æ®åº“] æ•°æ®åº“è¿æ¥æˆåŠŸ
```

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### âœ… ç¯å¢ƒæ£€æŸ¥

- [ ] Node.js ç‰ˆæœ¬ >= 18
- [ ] npm ç‰ˆæœ¬ >= 9
- [ ] PostgreSQL å·²å®‰è£… (æˆ–ä½¿ç”¨ SQLite)
- [ ] .env æ–‡ä»¶å·²é…ç½®

### âœ… ä¾èµ–æ£€æŸ¥

- [ ] npm install æˆåŠŸ
- [ ] node_modules ç›®å½•å·²åˆ›å»º
- [ ] package-lock.json å·²ç”Ÿæˆ

### âœ… ç¼–è¯‘æ£€æŸ¥

```bash
npm run build
```

- [ ] TypeScript ç¼–è¯‘æˆåŠŸ
- [ ] dist ç›®å½•å·²ç”Ÿæˆ
- [ ] æ²¡æœ‰ç¼–è¯‘é”™è¯¯

### âœ… æ•°æ®åº“æ£€æŸ¥

```bash
npm run db:push
```

- [ ] æ•°æ®åº“è¿æ¥æˆåŠŸ
- [ ] è¡¨å·²åˆ›å»º
- [ ] ç´¢å¼•å·²åˆ›å»º

### âœ… å¯åŠ¨æ£€æŸ¥

```bash
npm run dev
```

- [ ] æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
- [ ] ç›‘å¬ç«¯å£ 3000
- [ ] æ²¡æœ‰å¯åŠ¨é”™è¯¯

---

## ğŸ” API æµ‹è¯•

### 1. å¥åº·æ£€æŸ¥

```bash
curl http://localhost:3000/api/v1/health
```

**é¢„æœŸå“åº”**:
```json
{
  "code": 0,
  "message": "æœåŠ¡å™¨è¿è¡Œæ­£å¸¸",
  "data": {
    "status": "ok",
    "timestamp": "2025-10-25T10:00:00Z"
  }
}
```

### 2. ç”¨æˆ·æ³¨å†Œ

```bash
curl -X POST http://localhost:3000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "Test@123456",
    "name": "æµ‹è¯•ç”¨æˆ·",
    "company": "æµ‹è¯•å…¬å¸"
  }'
```

**é¢„æœŸå“åº”**:
```json
{
  "code": 0,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": "user-id",
    "email": "test@example.com",
    "name": "æµ‹è¯•ç”¨æˆ·",
    "token": "jwt-token",
    "refreshToken": "refresh-token"
  }
}
```

### 3. ç”¨æˆ·ç™»å½•

```bash
curl -X POST http://localhost:3000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "Admin@123456"
  }'
```

**é¢„æœŸå“åº”**:
```json
{
  "code": 0,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "id": "user-id",
    "email": "admin@example.com",
    "token": "jwt-token",
    "refreshToken": "refresh-token"
  }
}
```

### 4. è·å–é”€å”®å•åˆ—è¡¨

```bash
curl http://localhost:3000/api/v1/sales \
  -H "Authorization: Bearer <token>"
```

**é¢„æœŸå“åº”**:
```json
{
  "code": 0,
  "message": "è·å–é”€å”®å•åˆ—è¡¨æˆåŠŸ",
  "data": {
    "items": [...],
    "total": 1,
    "page": 1,
    "limit": 20
  }
}
```

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1: npm install å¤±è´¥

**ç—‡çŠ¶**: 
```
npm ERR! code ERESOLVE
npm ERR! ERESOLVE unable to resolve dependency tree
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
npm install --legacy-peer-deps
```

### é—®é¢˜ 2: æ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**:
```
Error: connect ECONNREFUSED 127.0.0.1:5432
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥ .env ä¸­çš„ DATABASE_URL æ˜¯å¦æ­£ç¡®
3. ä½¿ç”¨ SQLite è¿›è¡Œå¼€å‘: `DATABASE_URL=file:./dev.db`

### é—®é¢˜ 3: TypeScript ç¼–è¯‘é”™è¯¯

**ç—‡çŠ¶**:
```
error TS2307: Cannot find module '@config/env'
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ tsconfig.json ä¸­çš„ paths é…ç½®
2. ç¡®ä¿æ‰€æœ‰å¯¼å…¥è·¯å¾„æ­£ç¡®
3. è¿è¡Œ `npm run build` é‡æ–°ç¼–è¯‘

### é—®é¢˜ 4: ç«¯å£å·²è¢«å ç”¨

**ç—‡çŠ¶**:
```
Error: listen EADDRINUSE :::3000
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3000

# æ€æ­»è¿›ç¨‹
kill -9 <PID>

# æˆ–ä½¿ç”¨ä¸åŒçš„ç«¯å£
PORT=3001 npm run dev
```

### é—®é¢˜ 5: æ¨¡å—æ‰¾ä¸åˆ°

**ç—‡çŠ¶**:
```
Error: Cannot find module 'express'
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules package-lock.json
npm install
```

---

## ğŸ“Š æ€§èƒ½æµ‹è¯•

### ä½¿ç”¨ Apache Bench è¿›è¡Œæ€§èƒ½æµ‹è¯•

```bash
# æµ‹è¯• 100 ä¸ªè¯·æ±‚ï¼Œå¹¶å‘ 10
ab -n 100 -c 10 http://localhost:3000/api/v1/health

# æµ‹è¯• 1000 ä¸ªè¯·æ±‚ï¼Œå¹¶å‘ 50
ab -n 1000 -c 50 http://localhost:3000/api/v1/health
```

### ä½¿ç”¨ wrk è¿›è¡Œæ€§èƒ½æµ‹è¯•

```bash
# 4 ä¸ªçº¿ç¨‹ï¼Œ8 ä¸ªè¿æ¥ï¼Œè¿è¡Œ 30 ç§’
wrk -t4 -c8 -d30s http://localhost:3000/api/v1/health
```

---

## ğŸ§ª å•å…ƒæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
npm run test
```

### ç›‘å¬æ¨¡å¼

```bash
npm run test:watch
```

### è¦†ç›–ç‡æŠ¥å‘Š

```bash
npm run test:coverage
```

---

## ğŸ“ æ—¥å¿—æ£€æŸ¥

### æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/error.log

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
tail -f logs/combined.log
```

### æ—¥å¿—çº§åˆ«

- `error` - é”™è¯¯ä¿¡æ¯
- `warn` - è­¦å‘Šä¿¡æ¯
- `info` - ä¿¡æ¯
- `debug` - è°ƒè¯•ä¿¡æ¯

---

## âœ… å®Œæ•´æµ‹è¯•æµç¨‹

```bash
# 1. è¿›å…¥æœåŠ¡ç«¯ç›®å½•
cd server

# 2. å®‰è£…ä¾èµ–
npm install

# 3. åˆå§‹åŒ–æ•°æ®åº“
npm run db:migrate

# 4. ç§å­æ•°æ®
npm run db:seed

# 5. ç¼–è¯‘ TypeScript
npm run build

# 6. è¿è¡Œæµ‹è¯•
npm run test

# 7. å¯åŠ¨æœåŠ¡
npm run dev

# 8. åœ¨å¦ä¸€ä¸ªç»ˆç«¯æµ‹è¯• API
curl http://localhost:3000/api/v1/health
```

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†

- âœ… npm install æˆåŠŸ
- âœ… npm run build æˆåŠŸ
- âœ… npm run test é€šè¿‡
- âœ… npm run dev å¯åŠ¨æˆåŠŸ
- âœ… API ç«¯ç‚¹å¯ä»¥è®¿é—®
- âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸
- âœ… æ²¡æœ‰ç¼–è¯‘é”™è¯¯
- âœ… æ²¡æœ‰è¿è¡Œæ—¶é”™è¯¯

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹:
- `server/README.md` - é¡¹ç›®è¯´æ˜
- `server/DEVELOPMENT.md` - å¼€å‘æŒ‡å—
- `server/API_TESTING.md` - API æµ‹è¯•æŒ‡å—

