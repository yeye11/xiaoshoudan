import"../chunks/Bzak7iHL.js";import{i as le}from"../chunks/BvNKmLqF.js";import{p as de,o as ve,l as ce,u as pe,f as h,a as ue,b as p,c as he,g as e,e as L,i as s,k as x,m as P,r as o,s as d,w as u,t as y,j as C}from"../chunks/D2QV5ZPr.js";import{i as $}from"../chunks/BvOdW7jM.js";import{e as N,i as O}from"../chunks/IKNvqO1Y.js";import{r as fe}from"../chunks/CdHOzu_t.js";import{s as me}from"../chunks/Baws9BAC.js";import{b as be}from"../chunks/fy4Fdf6-.js";import{M as ge}from"../chunks/DO-NYQEs.js";import{g as q}from"../chunks/BqcfPq16.js";var _e=h('<div slot="actions"><button class="p-2 rounded-lg hover:bg-black hover:bg-opacity-10 transition-colors" aria-label="添加客户"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></button></div>'),xe=h("<button> </button>"),we=h('<div class="bg-white border-b border-gray-200 p-4 space-y-3"><div class="relative"><input type="text" placeholder="输入客户、客户电话、附件" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"/> <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <button class="absolute right-3 top-2.5 text-blue-500 font-medium">搜索</button></div> <div class="flex space-x-2"><span class="text-sm text-gray-600 py-2">搜索类别</span> <!></div></div>'),ke=h('<button class="bg-blue-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors">添加第一个客户</button>'),ye=h('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg> <p class="text-gray-500 mb-4"> </p> <!></div>'),Ce=h('<div class="flex items-center"><span class="inline-block w-2 h-2 bg-blue-500 rounded-full mr-2"></span> </div>'),$e=h('<div class="flex items-center"><svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg> </div>'),Me=h('<div class="flex items-center"><svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="truncate"> </span></div>'),je=h('<div class="text-right"><div class="text-xs text-gray-500">欠款</div> <div class="text-sm font-medium text-red-600"> </div></div>'),Le=h('<div class="bg-white rounded-lg p-4 shadow-sm border hover:shadow-md transition-shadow cursor-pointer"><div class="flex items-start justify-between"><div class="flex-1"><h3 class="font-medium text-gray-900 mb-1"> </h3> <div class="text-sm text-gray-600 space-y-1"><!> <!> <!></div></div> <!></div></div>'),ze=h('<div class="space-y-3"></div>'),Be=h('<!> <!> <div class="p-4"><!></div>',1);function Ne(E,G){de(G,!1);let M=[],w=P([]),b=P(""),z=P("all"),B=P(!1);const Q=[{id:"all",name:"全部"},{id:"name",name:"客户"},{id:"phone",name:"客户电话"},{id:"attachment",name:"附件"}];ve(()=>{R()});const R=()=>{try{const t=localStorage.getItem("customers");t&&(M=JSON.parse(t),x(w,M))}catch(t){console.error("加载客户数据失败:",t)}},T=()=>{if(!e(b).trim()){x(w,M);return}const t=e(b).toLowerCase();x(w,M.filter(r=>{var i,a,f,m,v;switch(e(z)){case"name":return r.name.toLowerCase().includes(t);case"phone":return r.phone.includes(t)||((i=r.backupPhone)==null?void 0:i.includes(t));case"attachment":return(a=r.attachments)==null?void 0:a.some(c=>c.toLowerCase().includes(t));default:return r.name.toLowerCase().includes(t)||r.phone.includes(t)||((f=r.backupPhone)==null?void 0:f.includes(t))||((m=r.email)==null?void 0:m.toLowerCase().includes(t))||((v=r.address)==null?void 0:v.toLowerCase().includes(t))}}))},D=()=>{x(B,!e(B)),e(B)||(x(b,""),x(w,M))},U=t=>{q(`/mobile/customers/${t}`)},H=()=>{q("/mobile/customers/new")},W=t=>t?t.replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3"):"",V=t=>t.initialDebt;ce(()=>e(b),()=>{e(b)!==void 0&&T()}),pe(),le();var A=Be(),F=ue(A);ge(F,{title:"客户",showBack:!0,showSearch:!0,showActions:!0,backgroundColor:"bg-blue-500",$$events:{search:D,action:H},$$slots:{actions:(t,r)=>{var i=_e(),a=s(i);o(i),L("click",a,H),p(t,i)}}});var I=d(F,2);{var X=t=>{var r=we(),i=s(r),a=s(i);fe(a);var f=d(a,4);o(i);var m=d(i,2),v=d(s(m),2);N(v,1,()=>Q,O,(c,k)=>{var _=xe(),S=s(_,!0);o(_),y(()=>{me(_,1,`px-3 py-1 rounded-full text-sm font-medium transition-colors
                 ${e(z),e(k),u(()=>e(z)===e(k).id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200")??""}`),C(S,(e(k),u(()=>e(k).name)))}),L("click",_,()=>x(z,e(k).id)),p(c,_)}),o(m),o(r),be(a,()=>e(b),c=>x(b,c)),L("click",f,D),p(t,r)};$(I,t=>{e(B)&&t(X)})}var J=d(I,2),Y=s(J);{var Z=t=>{var r=ye(),i=d(s(r),2),a=s(i,!0);o(i);var f=d(i,2);{var m=v=>{var c=ke();L("click",c,H),p(v,c)};$(f,v=>{e(b)||v(m)})}o(r),y(()=>C(a,e(b)?"暂时没有数据哦~":"还没有客户数据")),p(t,r)},ee=t=>{var r=ze();N(r,5,()=>e(w),O,(i,a)=>{var f=Le(),m=s(f),v=s(m),c=s(v),k=s(c,!0);o(c);var _=d(c,2),S=s(_);{var te=n=>{var l=Ce(),g=d(s(l));o(l),y(()=>C(g,` ${e(a),u(()=>e(a).category)??""}`)),p(n,l)};$(S,n=>{e(a),u(()=>e(a).category)&&n(te)})}var K=d(S,2);{var ae=n=>{var l=$e(),g=d(s(l));o(l),y(j=>C(g,` ${j??""}`),[()=>(e(a),u(()=>W(e(a).phone)))]),p(n,l)};$(K,n=>{e(a),u(()=>e(a).phone)&&n(ae)})}var re=d(K,2);{var oe=n=>{var l=Me(),g=d(s(l),2),j=s(g,!0);o(g),o(l),y(()=>C(j,(e(a),u(()=>e(a).address)))),p(n,l)};$(re,n=>{e(a),u(()=>e(a).address)&&n(oe)})}o(_),o(v);var se=d(v,2);{var ie=n=>{var l=je(),g=d(s(l),2),j=s(g);o(g),o(l),y(ne=>C(j,`¥${ne??""}`),[()=>(e(a),u(()=>V(e(a)).toFixed(2)))]),p(n,l)};$(se,n=>{e(a),u(()=>V(e(a))>0)&&n(ie)})}o(m),o(f),y(()=>C(k,(e(a),u(()=>e(a).name)))),L("click",f,()=>U(e(a).id)),p(i,f)}),o(r),p(t,r)};$(Y,t=>{e(w),u(()=>e(w).length===0)?t(Z):t(ee,!1)})}o(J),p(E,A),he()}export{Ne as component};
