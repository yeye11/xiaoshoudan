import"../chunks/Bzak7iHL.js";import{i as $e}from"../chunks/BvNKmLqF.js";import{p as je,m as F,o as Ae,f as _,h as Pe,a as Be,t as E,e as m,b as y,c as Ce,d as n,g as t,$ as Je,s as a,i as s,r as i,j as M,k as x}from"../chunks/D2QV5ZPr.js";import{i as re}from"../chunks/BvOdW7jM.js";import{e as Te,i as qe}from"../chunks/IKNvqO1Y.js";import{r as c}from"../chunks/CdHOzu_t.js";import{b as u}from"../chunks/fy4Fdf6-.js";import{c as ie,v as Fe,a as se}from"../chunks/BFtLDb_d.js";import{I as Ee}from"../chunks/DxmLtRsK.js";import{D as Me}from"../chunks/Du_dmzzL.js";import{N as ze}from"../chunks/BpcD30hu.js";var Ge=_("<li> </li>"),He=_('<div class="mt-4 p-4 bg-red-50 border border-red-200 rounded-md"><h3 class="text-red-800 font-medium mb-2">请修正以下错误：</h3> <ul class="text-red-700 text-sm"></ul></div>'),Ke=_('<div class="bg-white rounded-lg shadow-md p-6"><div class="mb-6"><h2 class="text-xl font-semibold mb-4">公司信息</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">公司名称</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">联系电话</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-2">公司地址</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div></div> <div class="mb-6"><h2 class="text-xl font-semibold mb-4">客户信息</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">客户名称 *</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入客户名称"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">客户电话</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入客户电话"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">制单人</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入制单人"/></div> <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-2">客户地址</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入客户地址"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">送货日期</label> <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div></div> <div class="mb-6"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-semibold">商品明细</h2> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">添加商品</button></div> <!></div> <div class="flex justify-end"><div class="bg-gray-50 p-4 rounded-lg"><div class="text-right"><span class="text-lg font-semibold">合计金额：</span> <span class="text-xl font-bold text-blue-600"> </span></div></div></div> <!></div>'),Le=_('<!> <div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-6"><h1 class="text-3xl font-bold text-gray-900">送货单管理</h1> <div class="flex space-x-3"><button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"> </button> <button class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">保存送货单</button> <button class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">重置表单</button></div></div> <!></div>',1);function ot(ne,le){je(le,!1);let f={name:"佛山市仁腾装饰材料有限公司",address:"佛山市南海盐步大转弯夹板装饰第五期C1座12号",phone:"18575852698",email:"",taxId:""},e=F(ie(f)),b=F(!1),p=F([]);Ae(()=>{const r=localStorage.getItem("companyInfo");r&&(f=JSON.parse(r),n(e,t(e).companyInfo={...f}));const l=new Date().toISOString().split("T")[0];n(e,t(e).deliveryDate=l),n(e,t(e).date=l),n(e,t(e).createdBy="张总")});function h(){localStorage.setItem("companyInfo",JSON.stringify(t(e).companyInfo))}function de(){const r={productName:"",specification:"",unit:"件",quantity:1,unitPrice:0,amount:0};n(e,t(e).items=[...t(e).items,r])}function ce(r){n(e,t(e).items=t(e).items.filter((l,v)=>v!==r)),n(e,t(e).totalAmount=se(t(e).items))}function ue(r,l,v){const d=[...t(e).items];d[r]={...d[r],[l]:v},(l==="quantity"||l==="unitPrice")&&(d[r].amount=d[r].quantity*d[r].unitPrice),n(e,t(e).items=d),n(e,t(e).totalAmount=se(d))}function ve(){x(b,!t(b))}function me(){return x(p,Fe(t(e))),t(p).length===0}function pe(){if(!me()){alert(`请填写完整信息：
`+t(p).join(`
`));return}const r=JSON.parse(localStorage.getItem("deliveryNotes")||"[]"),l={...t(e),id:Date.now().toString(),type:"delivery",createdAt:new Date().toISOString()};r.push(l),localStorage.setItem("deliveryNotes",JSON.stringify(r)),alert("送货单保存成功！")}function fe(){if(confirm("确定要重置表单吗？所有数据将被清空。")){x(e,ie(f));const r=new Date().toISOString().split("T")[0];n(e,t(e).deliveryDate=r),n(e,t(e).date=r),n(e,t(e).createdBy="张总"),x(p,[])}}$e();var z=Le();Pe(r=>{Je.title="送货单管理 - 销售管理系统"});var G=Be(z);ze(G,{});var H=a(G,2),I=s(H),K=a(s(I),2),g=s(K),be=s(g,!0);i(g);var L=a(g,2),ge=a(L,2);i(K),i(I);var ye=a(I,2);{var xe=r=>{Me(r,{get invoice(){return t(e)}})},_e=r=>{var l=Ke(),v=s(l),d=a(s(v),2),w=s(d),S=a(s(w),2);c(S),i(w);var k=a(w,2),N=a(s(k),2);c(N),i(k);var Q=a(k,2),D=a(s(Q),2);c(D),i(Q),i(d),i(v);var O=a(v,2),R=a(s(O),2),$=s(R),U=a(s($),2);c(U),i($);var j=a($,2),V=a(s(j),2);c(V),i(j);var A=a(j,2),W=a(s(A),2);c(W),i(A);var P=a(A,2),X=a(s(P),2);c(X),i(P);var Y=a(P,2),Z=a(s(Y),2);c(Z),i(Y),i(R),i(O);var B=a(O,2),C=s(B),he=a(s(C),2);i(C);var Ie=a(C,2);Ee(Ie,{get items(){return t(e).items},$$events:{update:o=>ue(o.detail.index,o.detail.field,o.detail.value),remove:o=>ce(o.detail.index)}}),i(B);var J=a(B,2),ee=s(J),te=s(ee),ae=a(s(te),2),we=s(ae);i(ae),i(te),i(ee),i(J);var Se=a(J,2);{var ke=o=>{var T=He(),oe=a(s(T),2);Te(oe,5,()=>t(p),qe,(Ne,De)=>{var q=Ge(),Oe=s(q);i(q),E(()=>M(Oe,`• ${t(De)??""}`)),y(Ne,q)}),i(oe),i(T),y(o,T)};re(Se,o=>{t(p).length>0&&o(ke)})}i(l),E(o=>M(we,`¥${o??""}`),[()=>t(e).totalAmount.toFixed(2)]),u(S,()=>t(e).companyInfo.name,o=>n(e,t(e).companyInfo.name=o)),m("blur",S,h),u(N,()=>t(e).companyInfo.phone,o=>n(e,t(e).companyInfo.phone=o)),m("blur",N,h),u(D,()=>t(e).companyInfo.address,o=>n(e,t(e).companyInfo.address=o)),m("blur",D,h),u(U,()=>t(e).customerInfo.name,o=>n(e,t(e).customerInfo.name=o)),u(V,()=>t(e).customerInfo.phone,o=>n(e,t(e).customerInfo.phone=o)),u(W,()=>t(e).createdBy,o=>n(e,t(e).createdBy=o)),u(X,()=>t(e).customerInfo.address,o=>n(e,t(e).customerInfo.address=o)),u(Z,()=>t(e).deliveryDate,o=>n(e,t(e).deliveryDate=o)),m("click",he,de),y(r,l)};re(ye,r=>{t(b)?r(xe):r(_e,!1)})}i(H),E(()=>M(be,t(b)?"编辑模式":"预览模式")),m("click",g,ve),m("click",L,pe),m("click",ge,fe),y(ne,z),Ce()}export{ot as component};
