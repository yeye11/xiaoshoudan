import"../chunks/Bzak7iHL.js";import{i as ft}from"../chunks/BvNKmLqF.js";import{p as xt,o as ht,f as bt,a as yt,t as wt,e as g,b as _t,c as St,s as r,i as e,k as W,m as z,g as s,d as f,r as a,n as p,j as v}from"../chunks/D2QV5ZPr.js";import{s as m}from"../chunks/Baws9BAC.js";import{M as kt}from"../chunks/DO-NYQEs.js";var It=bt('<!> <div class="p-4 space-y-6"><div class="bg-white rounded-lg p-4 shadow-sm border"><div class="flex items-center space-x-4 mb-4"><div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div> <div class="flex-1"><h3 class="font-medium text-gray-900"> </h3> <p class="text-sm text-gray-600"> </p> <p class="text-sm text-gray-600"> </p></div></div> <button class="w-full bg-purple-500 text-white py-2 rounded-lg font-medium hover:bg-purple-600 transition-colors">编辑资料</button></div> <div class="bg-white rounded-lg p-4 shadow-sm border"><h3 class="font-medium text-gray-900 mb-4">数据统计</h3> <div class="grid grid-cols-2 gap-4"><div class="text-center"><div class="text-lg font-bold text-blue-600"> </div> <div class="text-sm text-gray-500">客户</div></div> <div class="text-center"><div class="text-lg font-bold text-orange-600"> </div> <div class="text-sm text-gray-500">产品</div></div> <div class="text-center"><div class="text-lg font-bold text-green-600"> </div> <div class="text-sm text-gray-500">销售单</div></div> <div class="text-center"><div class="text-lg font-bold text-purple-600"> </div> <div class="text-sm text-gray-500">数据大小</div></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border"><h3 class="font-medium text-gray-900 mb-4">应用设置</h3> <div class="space-y-4"><div class="flex items-center justify-between"><div><div class="font-medium text-gray-900">自动保存</div> <div class="text-sm text-gray-500">自动保存表单数据</div></div> <button><span></span></button></div> <div class="flex items-center justify-between"><div><div class="font-medium text-gray-900">消息通知</div> <div class="text-sm text-gray-500">接收应用通知</div></div> <button><span></span></button></div> <div class="flex items-center justify-between"><div><div class="font-medium text-gray-900">深色模式</div> <div class="text-sm text-gray-500">使用深色主题</div></div> <button><span></span></button></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border"><h3 class="font-medium text-gray-900 mb-4">数据管理</h3> <div class="space-y-3"><button class="w-full bg-green-500 text-white py-3 rounded-lg font-medium hover:bg-green-600 transition-colors flex items-center justify-center space-x-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导出数据</span></button> <button class="w-full bg-red-500 text-white py-3 rounded-lg font-medium hover:bg-red-600 transition-colors flex items-center justify-center space-x-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> <span>清除数据</span></button></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border"><h3 class="font-medium text-gray-900 mb-4">关于应用</h3> <div class="space-y-3 text-sm text-gray-600"><div class="flex justify-between"><span>应用名称</span> <span>Cypridina Client</span></div> <div class="flex justify-between"><span>版本号</span> <span>v1.0.0</span></div> <div class="flex justify-between"><span>构建时间</span> <span>2025-10-14</span></div> <div class="flex justify-between"><span>技术栈</span> <span>SvelteKit + Tauri</span></div></div></div></div>',1);function zt(X,Y){xt(Y,!1);let l=z({name:"张总",company:"佛山市仁腾装饰材料有限公司",phone:"18575852698",email:"",avatar:""}),o=z({autoSave:!0,notifications:!0,darkMode:!1,language:"zh-CN"}),i=z({customers:0,products:0,invoices:0,dataSize:"0 KB"});ht(()=>{Z(),tt(),C()});const Z=()=>{try{const t=localStorage.getItem("user_info");t&&W(l,{...s(l),...JSON.parse(t)})}catch(t){console.error("加载用户信息失败:",t)}},tt=()=>{try{const t=localStorage.getItem("app_settings");t&&W(o,{...s(o),...JSON.parse(t)})}catch(t){console.error("加载设置失败:",t)}},et=()=>{try{localStorage.setItem("app_settings",JSON.stringify(s(o)))}catch(t){console.error("保存设置失败:",t)}},C=()=>{try{const t=JSON.parse(localStorage.getItem("customers")||"[]"),n=JSON.parse(localStorage.getItem("products")||"[]"),u=JSON.parse(localStorage.getItem("invoice_history")||"[]");f(i,s(i).customers=t.length),f(i,s(i).products=n.length),f(i,s(i).invoices=u.length);const d={customers:t,products:n,invoices:u,userInfo:s(l),settings:s(o)},c=new Blob([JSON.stringify(d)]).size;f(i,s(i).dataSize=at(c))}catch(t){console.error("计算数据统计失败:",t)}},at=t=>{if(t===0)return"0 B";const n=1024,u=["B","KB","MB","GB"],d=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,d)).toFixed(2))+" "+u[d]},st=()=>{try{const t={customers:JSON.parse(localStorage.getItem("customers")||"[]"),products:JSON.parse(localStorage.getItem("products")||"[]"),invoices:JSON.parse(localStorage.getItem("invoice_history")||"[]"),userInfo:s(l),settings:s(o),exportTime:new Date().toISOString()},n=JSON.stringify(t,null,2),u=new Blob([n],{type:"application/json"}),d=URL.createObjectURL(u),c=document.createElement("a");c.href=d,c.download=`cypridina-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(d),alert("数据导出成功！")}catch(t){console.error("导出数据失败:",t),alert("导出失败，请重试")}},rt=()=>{confirm("确定要清除所有数据吗？此操作不可恢复！")&&confirm("请再次确认：这将删除所有客户、产品和销售单数据！")&&(localStorage.removeItem("customers"),localStorage.removeItem("products"),localStorage.removeItem("invoice_history"),localStorage.removeItem("customer_categories"),localStorage.removeItem("product_categories"),localStorage.removeItem("product_units"),C(),alert("数据已清除"))},y=t=>{f(o,s(o)[t]=!s(o)[t]),et()};ft();var J=It(),D=yt(J);kt(D,{title:"我的",showBack:!0,backgroundColor:"bg-purple-500"});var $=r(D,2),w=e($),L=e(w),U=r(e(L),2),_=e(U),ot=e(_,!0);a(_);var S=r(_,2),it=e(S,!0);a(S);var R=r(S,2),nt=e(R,!0);a(R),a(U),a(L),p(2),a(w);var k=r(w,2),F=r(e(k),2),I=e(F),H=e(I),lt=e(H,!0);a(H),p(2),a(I);var j=r(I,2),K=e(j),dt=e(K,!0);a(K),p(2),a(j);var M=r(j,2),T=e(M),ct=e(T,!0);a(T),p(2),a(M);var V=r(M,2),A=e(V),vt=e(A,!0);a(A),p(2),a(V),a(F),a(k);var O=r(k,2),E=r(e(O),2),B=e(E),x=r(e(B),2),ut=e(x);a(x),a(B);var N=r(B,2),h=r(e(N),2),pt=e(h);a(h),a(N);var G=r(N,2),b=r(e(G),2),mt=e(b);a(b),a(G),a(E),a(O);var q=r(O,2),P=r(e(q),2),Q=e(P),gt=r(Q,2);a(P),a(q),p(2),a($),wt(()=>{v(ot,s(l).name),v(it,s(l).company),v(nt,s(l).phone),v(lt,s(i).customers),v(dt,s(i).products),v(ct,s(i).invoices),v(vt,s(i).dataSize),m(x,1,`relative inline-flex h-6 w-11 items-center rounded-full transition-colors
                 ${s(o).autoSave?"bg-purple-500":"bg-gray-200"}`),m(ut,1,`inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                   ${s(o).autoSave?"translate-x-6":"translate-x-1"}`),m(h,1,`relative inline-flex h-6 w-11 items-center rounded-full transition-colors
                 ${s(o).notifications?"bg-purple-500":"bg-gray-200"}`),m(pt,1,`inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                   ${s(o).notifications?"translate-x-6":"translate-x-1"}`),m(b,1,`relative inline-flex h-6 w-11 items-center rounded-full transition-colors
                 ${s(o).darkMode?"bg-purple-500":"bg-gray-200"}`),m(mt,1,`inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                   ${s(o).darkMode?"translate-x-6":"translate-x-1"}`)}),g("click",x,()=>y("autoSave")),g("click",h,()=>y("notifications")),g("click",b,()=>y("darkMode")),g("click",Q,st),g("click",gt,rt),_t(X,J),St()}export{zt as component};
