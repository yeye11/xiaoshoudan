import"../chunks/Bzak7iHL.js";import{i as Et}from"../chunks/BvNKmLqF.js";import{p as Rt,f as H,i as e,s as a,r as t,q as y,w as c,t as A,g as r,j as m,b as g,n as qt,e as w,c as Gt,o as Xt,k,m as K,l as ee,u as re,B as ae,aP as Q,a as Qt,d as z}from"../chunks/D2QV5ZPr.js";import{i as B}from"../chunks/BvOdW7jM.js";import{e as Ut,i as Jt}from"../chunks/IKNvqO1Y.js";import{r as xt}from"../chunks/CdHOzu_t.js";import{b as gt}from"../chunks/fy4Fdf6-.js";import{f as $,c as Wt,a as oe,v as se,k as ne}from"../chunks/BFtLDb_d.js";import{I as de}from"../chunks/DxmLtRsK.js";import{p as zt}from"../chunks/BR_REAzN.js";import{N as ie}from"../chunks/BpcD30hu.js";var le=H('<div class="mb-2"><span class="font-medium text-gray-700">客户地址:</span> <span class="text-gray-900"> </span></div>'),ce=H('<div class="mb-2"><span class="font-medium text-gray-700">客户电话:</span> <span class="text-gray-900"> </span></div>'),ve=H('<tr><td class="border border-gray-400 px-3 py-2 text-center"></td><td class="border border-gray-400 px-3 py-2"> </td><td class="border border-gray-400 px-3 py-2 text-center"> </td><td class="border border-gray-400 px-3 py-2 text-center"> </td><td class="border border-gray-400 px-3 py-2 text-right"> </td><td class="border border-gray-400 px-3 py-2 text-right"> </td><td class="border border-gray-400 px-3 py-2 text-right font-medium"> </td><td class="border border-gray-400 px-3 py-2"> </td></tr>'),pe=H('<tr><td class="border border-gray-400 px-3 py-2 h-8">&nbsp;</td><td class="border border-gray-400 px-3 py-2">&nbsp;</td><td class="border border-gray-400 px-3 py-2">&nbsp;</td><td class="border border-gray-400 px-3 py-2">&nbsp;</td><td class="border border-gray-400 px-3 py-2">&nbsp;</td><td class="border border-gray-400 px-3 py-2">&nbsp;</td><td class="border border-gray-400 px-3 py-2">&nbsp;</td><td class="border border-gray-400 px-3 py-2">&nbsp;</td></tr>'),ue=H('<div><span class="font-medium text-gray-700">备注:</span> <span class="text-gray-900"> </span></div>'),me=H('<div class="invoice-preview svelte-mo8qnb"><div class="no-print mb-6 flex justify-between items-center bg-gray-50 p-4 rounded-lg svelte-mo8qnb"><button class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md font-medium transition-colors flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> 返回编辑</button> <div class="flex space-x-2"><button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md font-medium transition-colors flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> 复制</button> <button class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-md font-medium transition-colors flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> 导出PDF</button> <button class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md font-medium transition-colors flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg> 打印</button></div></div> <div class="invoice-content bg-white p-8 shadow-lg max-w-4xl mx-auto svelte-mo8qnb" style="min-height: 297mm;"><div class="text-center mb-8"><h1 class="text-2xl font-bold text-gray-900 mb-2"> </h1> <p class="text-sm text-gray-600 mb-1"> </p> <p class="text-sm text-gray-600"> </p></div> <div class="text-center mb-8"><h2 class="text-3xl font-bold text-gray-900">送货单</h2></div> <div class="grid grid-cols-2 gap-8 mb-8"><div><div class="mb-2"><span class="font-medium text-gray-700">客户名称:</span> <span class="text-gray-900"> </span></div> <!> <!></div> <div class="text-right"><div class="mb-2"><span class="font-medium text-gray-700">制单人:</span> <span class="text-gray-900"> </span></div> <div class="mb-2"><span class="font-medium text-gray-700">送货日期:</span> <span class="text-gray-900"> </span></div> <div class="mb-2"><span class="font-medium text-gray-700">单据编号:</span> <span class="text-gray-900"> </span></div></div></div> <div class="mb-8"><table class="w-full border-collapse border border-gray-400"><thead><tr class="bg-gray-100"><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">序号</th><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">产品名称</th><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">规格型号</th><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">单位</th><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">数量</th><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">单价</th><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">金额</th><th class="border border-gray-400 px-3 py-2 text-center font-medium text-gray-700">备注</th></tr></thead><tbody><!><!></tbody><tfoot><tr class="bg-gray-100"><td colspan="6" class="border border-gray-400 px-3 py-3 text-right font-medium"> </td><td class="border border-gray-400 px-3 py-3 text-right font-bold text-lg"> </td><td class="border border-gray-400 px-3 py-3"></td></tr></tfoot></table></div> <div class="grid grid-cols-2 gap-8 mb-8"><div><p class="text-sm text-gray-600 mb-4">以上货品请核对清楚，如有质量问题请在3日内致电告知本公司，谢谢！</p> <!></div> <div class="text-right text-sm text-gray-600"><p class="mb-8">第1页/共1页</p></div></div> <div class="grid grid-cols-2 gap-8 mt-16"><div class="text-center"><div class="border-b border-gray-400 mb-2 pb-8"></div> <p class="text-sm text-gray-600">送货单位及经手人（签章）</p></div> <div class="text-center"><div class="border-b border-gray-400 mb-2 pb-8"></div> <p class="text-sm text-gray-600">收货单位及经手人（签章）</p></div></div></div></div>');function xe(Bt,D){Rt(D,!1);let s=zt(D,"invoice",8),i=zt(D,"onBack",8),C=zt(D,"onPrint",8);function j(n){return new Date(n).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}function I(){window.print(),C()()}function M(){window.print()}async function N(){const n=nt();try{await navigator.clipboard.writeText(n),alert("销售单内容已复制到剪贴板")}catch(o){console.error("复制失败:",o)}}function nt(){let n=`${s().companyInfo.name}
`;return n+=`地址: ${s().companyInfo.address}
`,n+=`电话: ${s().companyInfo.phone}

`,n+=`送货单

`,n+=`客户名称: ${s().customerInfo.name}
`,n+=`制单人: ${s().createdBy}
`,n+=`送货日期: ${j(s().date)}

`,n+=`商品明细:
`,n+=`序号	产品名称	规格型号	单位	数量	单价	金额
`,s().items.forEach((o,d)=>{n+=`${d+1}	${o.productName}	${o.specification}	${o.unit}	${o.quantity}	${$(o.unitPrice)}	${$(o.amount)}
`}),n+=`
合计: ${$(s().totalAmount)}`,n}Et();var q=me(),dt=e(q),W=e(dt),bt=a(W,2),ft=e(bt),yt=a(ft,2),Ht=a(yt,2);t(bt),t(dt);var it=a(dt,2),L=e(it),T=e(L),X=e(T,!0);t(T);var U=a(T,2),St=e(U);t(U);var Y=a(U,2),ht=e(Y);t(Y),t(L);var J=a(L,4),Z=e(J),p=e(Z),tt=a(e(p),2),_t=e(tt,!0);t(tt),t(p);var et=a(p,2);{var lt=n=>{var o=le(),d=a(e(o),2),f=e(d,!0);t(d),t(o),A(()=>m(f,(y(s()),c(()=>s().customerInfo.address)))),g(n,o)};B(et,n=>{y(s()),c(()=>s().customerInfo.address)&&n(lt)})}var wt=a(et,2);{var ct=n=>{var o=ce(),d=a(e(o),2),f=e(d,!0);t(d),t(o),A(()=>m(f,(y(s()),c(()=>s().customerInfo.phone)))),g(n,o)};B(wt,n=>{y(s()),c(()=>s().customerInfo.phone)&&n(ct)})}t(Z);var V=a(Z,2),O=e(V),F=a(e(O),2),kt=e(F,!0);t(F),t(O);var E=a(O,2),l=a(e(E),2),u=e(l,!0);t(l),t(E);var x=a(E,2),h=a(e(x),2),R=e(h,!0);t(h),t(x),t(V),t(J);var P=a(J,2),vt=e(P),rt=a(e(vt)),G=e(rt);Ut(G,1,()=>(y(s()),c(()=>s().items)),Jt,(n,o,d)=>{var f=ve(),Ct=e(f);Ct.textContent=d+1;var Mt=a(Ct),Nt=e(Mt,!0);t(Mt);var $t=a(Mt),Dt=e($t,!0);t($t);var Lt=a($t),Tt=e(Lt,!0);t(Lt);var Ot=a(Lt),At=e(Ot,!0);t(Ot);var jt=a(Ot),Vt=e(jt,!0);t(jt);var Pt=a(jt),Ft=e(Pt,!0);t(Pt);var Kt=a(Pt),Yt=e(Kt,!0);t(Kt),t(f),A((Zt,te)=>{m(Nt,(r(o),c(()=>r(o).productName))),m(Dt,(r(o),c(()=>r(o).specification))),m(Tt,(r(o),c(()=>r(o).unit))),m(At,(r(o),c(()=>r(o).quantity))),m(Vt,Zt),m(Ft,te),m(Yt,(r(o),c(()=>r(o).note||"")))},[()=>(y($),r(o),c(()=>$(r(o).unitPrice))),()=>(y($),r(o),c(()=>$(r(o).amount)))]),g(n,f)});var at=a(G);Ut(at,1,()=>(y(s()),c(()=>Array(Math.max(0,8-s().items.length)))),Jt,(n,o)=>{var d=pe();g(n,d)}),t(rt);var pt=a(rt),ut=e(pt),ot=e(ut),b=e(ot);t(ot);var st=a(ot),It=e(st,!0);t(st),qt(),t(ut),t(pt),t(vt),t(P);var mt=a(P,2),_=e(mt),v=a(e(_),2);{var S=n=>{var o=ue(),d=a(e(o),2),f=e(d,!0);t(d),t(o),A(()=>m(f,(y(s()),c(()=>s().notes)))),g(n,o)};B(v,n=>{y(s()),c(()=>s().notes)&&n(S)})}t(_),qt(2),t(mt),qt(2),t(it),t(q),A((n,o,d)=>{m(X,(y(s()),c(()=>s().companyInfo.name))),m(St,`地址: ${y(s()),c(()=>s().companyInfo.address)??""}`),m(ht,`电话: ${y(s()),c(()=>s().companyInfo.phone)??""}`),m(_t,(y(s()),c(()=>s().customerInfo.name))),m(kt,(y(s()),c(()=>s().createdBy))),m(u,n),m(R,(y(s()),c(()=>s().invoiceNumber))),m(b,`合计（大写）：${o??""}元整`),m(It,d)},[()=>(y(s()),c(()=>j(s().date))),()=>(y(s()),c(()=>s().totalAmount.toFixed(2).replace(/\d/g,n=>"零一二三四五六七八九"[parseInt(n)]))),()=>(y($),y(s()),c(()=>$(s().totalAmount)))]),w("click",W,function(...n){var o;(o=i())==null||o.apply(this,n)}),w("click",ft,N),w("click",yt,M),w("click",Ht,I),g(Bt,q),Gt()}var ge=H('<div class="text-center py-12"><svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-gray-500"> </p></div>'),be=Q('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>'),fe=Q('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>'),ye=Q('<svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),he=Q('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>'),_e=Q('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>'),we=Q('<svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),ke=Q('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>'),Ie=Q('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>'),Ce=Q('<svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg>'),je=H('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"><button class="text-blue-600 hover:text-blue-900">加载</button> <button class="text-red-600 hover:text-red-900">删除</button></td></tr>'),Be=H('<table class="w-full"><thead class="bg-gray-50 sticky top-0"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"><button class="flex items-center hover:text-gray-700">日期 <!></button></th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">单据编号</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"><button class="flex items-center hover:text-gray-700">客户名称 <!></button></th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"><button class="flex items-center hover:text-gray-700">金额 <!></button></th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">制单人</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">商品数量</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table>'),He=H('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden"><div class="bg-gray-50 px-6 py-4 border-b border-gray-200"><div class="flex justify-between items-center"><h2 class="text-xl font-semibold text-gray-900">销售单历史记录</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="px-6 py-4 border-b border-gray-200"><div class="flex flex-col sm:flex-row gap-4 items-center justify-between"><div class="flex-1 max-w-md"><input type="text" placeholder="搜索客户名称、单据编号或制单人..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="flex space-x-2"><button class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors">导出</button> <button class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors">清空</button></div></div></div> <div class="overflow-auto" style="max-height: calc(90vh - 200px);"><!></div> <div class="bg-gray-50 px-6 py-3 border-t border-gray-200"><p class="text-sm text-gray-600"> <!></p></div></div></div>');function Se(Bt,D){Rt(D,!1);let s=zt(D,"onLoadInvoice",8),i=zt(D,"onClose",8),C=K([]),j=K([]),I=K(""),M=K("date"),N=K("desc");Xt(()=>{nt()});function nt(){const l=JSON.parse(localStorage.getItem("invoiceHistory")||"[]");k(C,l),q()}function q(){let l=r(C);if(r(I).trim()){const u=r(I).toLowerCase();l=r(C).filter(x=>x.customerInfo.name.toLowerCase().includes(u)||x.invoiceNumber.toLowerCase().includes(u)||x.createdBy.toLowerCase().includes(u))}l.sort((u,x)=>{let h=0;switch(r(M)){case"date":h=new Date(u.date).getTime()-new Date(x.date).getTime();break;case"customer":h=u.customerInfo.name.localeCompare(x.customerInfo.name);break;case"amount":h=u.totalAmount-x.totalAmount;break}return r(N)==="desc"?-h:h}),k(j,l)}function dt(){q()}function W(l){r(M)===l?k(N,r(N)==="asc"?"desc":"asc"):(k(M,l),k(N,"desc")),q()}function bt(l){s()(l),i()()}function ft(l){if(confirm("确定要删除这张销售单吗？")){const u=r(C).filter(x=>x.id!==l);localStorage.setItem("invoiceHistory",JSON.stringify(u)),nt()}}function yt(){confirm("确定要清空所有历史记录吗？此操作不可恢复。")&&(localStorage.removeItem("invoiceHistory"),nt())}function Ht(l){return new Date(l).toLocaleDateString("zh-CN")}function it(){const l=JSON.stringify(r(C),null,2),u=new Blob([l],{type:"application/json"}),x=URL.createObjectURL(u),h=document.createElement("a");h.href=x,h.download=`invoice_history_${new Date().toISOString().split("T")[0]}.json`,h.click(),URL.revokeObjectURL(x)}ee(()=>r(I),()=>{r(I)!==void 0&&dt()}),re(),Et();var L=He(),T=e(L),X=e(T),U=e(X),St=a(e(U),2);t(U),t(X);var Y=a(X,2),ht=e(Y),J=e(ht),Z=e(J);xt(Z),t(J);var p=a(J,2),tt=e(p),_t=a(tt,2);t(p),t(ht),t(Y);var et=a(Y,2),lt=e(et);{var wt=l=>{var u=ge(),x=a(e(u),2),h=e(x,!0);t(x),t(u),A(()=>m(h,r(I)?"没有找到匹配的记录":"暂无历史记录")),g(l,u)},ct=l=>{var u=Be(),x=e(u),h=e(x),R=e(h),P=e(R),vt=a(e(P));{var rt=_=>{var v=ye(),S=e(v);{var n=d=>{var f=be();g(d,f)},o=d=>{var f=fe();g(d,f)};B(S,d=>{r(N)==="asc"?d(n):d(o,!1)})}t(v),g(_,v)};B(vt,_=>{r(M)==="date"&&_(rt)})}t(P),t(R);var G=a(R,2),at=e(G),pt=a(e(at));{var ut=_=>{var v=we(),S=e(v);{var n=d=>{var f=he();g(d,f)},o=d=>{var f=_e();g(d,f)};B(S,d=>{r(N)==="asc"?d(n):d(o,!1)})}t(v),g(_,v)};B(pt,_=>{r(M)==="customer"&&_(ut)})}t(at),t(G);var ot=a(G),b=e(ot),st=a(e(b));{var It=_=>{var v=Ce(),S=e(v);{var n=d=>{var f=ke();g(d,f)},o=d=>{var f=Ie();g(d,f)};B(S,d=>{r(N)==="asc"?d(n):d(o,!1)})}t(v),g(_,v)};B(st,_=>{r(M)==="amount"&&_(It)})}t(b),t(ot),qt(3),t(h),t(x);var mt=a(x);Ut(mt,5,()=>r(j),Jt,(_,v)=>{var S=je(),n=e(S),o=e(n,!0);t(n);var d=a(n),f=e(d,!0);t(d);var Ct=a(d),Mt=e(Ct,!0);t(Ct);var Nt=a(Ct),$t=e(Nt);t(Nt);var Dt=a(Nt),Lt=e(Dt,!0);t(Dt);var Tt=a(Dt),Ot=e(Tt);t(Tt);var At=a(Tt),jt=e(At),Vt=a(jt,2);t(At),t(S),A((Pt,Ft)=>{m(o,Pt),m(f,(r(v),c(()=>r(v).invoiceNumber))),m(Mt,(r(v),c(()=>r(v).customerInfo.name))),m($t,`¥${Ft??""}`),m(Lt,(r(v),c(()=>r(v).createdBy))),m(Ot,`${r(v),c(()=>r(v).items.length)??""} 项`)},[()=>(r(v),c(()=>Ht(r(v).date))),()=>(y($),r(v),c(()=>$(r(v).totalAmount)))]),w("click",jt,()=>bt(r(v))),w("click",Vt,()=>ft(r(v).id)),g(_,S)}),t(mt),t(u),w("click",P,()=>W("date")),w("click",at,()=>W("customer")),w("click",b,()=>W("amount")),g(l,u)};B(lt,l=>{r(j),c(()=>r(j).length===0)?l(wt):l(ct,!1)})}t(et);var V=a(et,2),O=e(V),F=e(O),kt=a(F);{var E=l=>{var u=ae();A(()=>m(u,`（从 ${r(C),c(()=>r(C).length)??""} 条中筛选）`)),g(l,u)};B(kt,l=>{r(I)&&l(E)})}t(O),t(V),t(T),t(L),A(()=>m(F,`共 ${r(j),c(()=>r(j).length)??""} 条记录 `)),w("click",St,function(...l){var u;(u=i())==null||u.apply(this,l)}),gt(Z,()=>r(I),l=>k(I,l)),w("click",tt,it),w("click",_t,yt),g(Bt,L),Gt()}var Me=H("<li> </li>"),Ne=H('<div class="bg-red-50 border border-red-200 rounded-md p-4 mb-6"><h3 class="text-red-800 font-medium mb-2">请修正以下错误：</h3> <ul class="text-red-700 text-sm space-y-1"></ul></div>'),$e=H('<!> <div class="mb-8"><h2 class="text-xl font-semibold text-gray-800 mb-4">公司信息</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">公司名称</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入公司名称"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">联系电话</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入联系电话"/></div> <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-2">公司地址</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入公司地址"/></div></div></div> <div class="mb-8"><h2 class="text-xl font-semibold text-gray-800 mb-4">客户信息</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">客户名称 *</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入客户名称" required/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">制单人 *</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="请输入制单人" required/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">送货日期</label> <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div></div> <!> <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mt-8"><button class="group bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 hover:shadow-lg flex items-center"><svg class="w-5 h-5 mr-2 group-hover:rotate-12 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 历史记录</button> <button class="group bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 hover:shadow-lg flex items-center"><svg class="w-5 h-5 mr-2 group-hover:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> 重置</button> <button class="group bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-8 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 hover:shadow-lg flex items-center"><svg class="w-5 h-5 mr-2 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> 预览销售单</button></div>',1),De=H('<!> <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8"><div class="max-w-6xl mx-auto px-4"><div class="bg-white rounded-xl shadow-xl p-8"><div class="text-center mb-8"><h1 class="text-4xl font-bold text-gray-900 mb-2">销售单生成器</h1> <p class="text-gray-600">快速创建专业的销售单据</p></div> <!></div></div></div> <!>',1);function Ee(Bt,D){Rt(D,!1);let s={name:"佛山市仁腾装饰材料有限公司",address:"佛山市南海盐步大转弯夹板装饰第五期C1座12号",phone:"18575852698",email:"",taxId:""},i=K(Wt(s)),C=K(!1),j=K(!1),I=K([]);Xt(()=>{const p=localStorage.getItem("companyInfo");p&&(s=JSON.parse(p),z(i,r(i).companyInfo={...s}))});function M(){localStorage.setItem("companyInfo",JSON.stringify(r(i).companyInfo))}function N(p){z(i,r(i).items=p),z(i,r(i).totalAmount=oe(p))}function nt(){k(I,se(r(i))),r(I).length===0&&(k(C,!0),q())}function q(){const p=JSON.parse(localStorage.getItem("invoiceHistory")||"[]");p.unshift({...r(i),id:crypto.randomUUID()}),p.length>50&&p.splice(50),localStorage.setItem("invoiceHistory",JSON.stringify(p))}function dt(){k(i,Wt(r(i).companyInfo)),k(C,!1),k(I,[])}function W(){k(C,!1)}function bt(){console.log("打印销售单:",r(i).invoiceNumber)}function ft(){k(j,!0)}function yt(){k(j,!1)}function Ht(p){k(i,{...p,id:crypto.randomUUID(),invoiceNumber:ne(),date:new Date().toISOString().split("T")[0],status:"draft"}),k(j,!1),k(C,!1)}Et();var it=De(),L=Qt(it);ie(L,{});var T=a(L,2),X=e(T),U=e(X),St=a(e(U),2);{var Y=p=>{var tt=$e(),_t=Qt(tt);{var et=b=>{var st=Ne(),It=a(e(st),2);Ut(It,5,()=>r(I),Jt,(mt,_)=>{var v=Me(),S=e(v);t(v),A(()=>m(S,`• ${r(_)??""}`)),g(mt,v)}),t(It),t(st),g(b,st)};B(_t,b=>{r(I).length>0&&b(et)})}var lt=a(_t,2),wt=a(e(lt),2),ct=e(wt),V=a(e(ct),2);xt(V),t(ct);var O=a(ct,2),F=a(e(O),2);xt(F),t(O);var kt=a(O,2),E=a(e(kt),2);xt(E),t(kt),t(wt),t(lt);var l=a(lt,2),u=a(e(l),2),x=e(u),h=a(e(x),2);xt(h),t(x);var R=a(x,2),P=a(e(R),2);xt(P),t(R);var vt=a(R,2),rt=a(e(vt),2);xt(rt),t(vt),t(u),t(l);var G=a(l,2);de(G,{onItemsChange:N,get items(){return r(i).items},set items(b){z(i,r(i).items=b)},$$legacy:!0});var at=a(G,2),pt=e(at),ut=a(pt,2),ot=a(ut,2);t(at),gt(V,()=>r(i).companyInfo.name,b=>z(i,r(i).companyInfo.name=b)),w("blur",V,M),gt(F,()=>r(i).companyInfo.phone,b=>z(i,r(i).companyInfo.phone=b)),w("blur",F,M),gt(E,()=>r(i).companyInfo.address,b=>z(i,r(i).companyInfo.address=b)),w("blur",E,M),gt(h,()=>r(i).customerInfo.name,b=>z(i,r(i).customerInfo.name=b)),gt(P,()=>r(i).createdBy,b=>z(i,r(i).createdBy=b)),gt(rt,()=>r(i).date,b=>z(i,r(i).date=b)),w("click",pt,ft),w("click",ut,dt),w("click",ot,nt),g(p,tt)},ht=p=>{xe(p,{get invoice(){return r(i)},onBack:W,onPrint:bt})};B(St,p=>{r(C)?p(ht,!1):p(Y)})}t(U),t(X),t(T);var J=a(T,2);{var Z=p=>{Se(p,{onLoadInvoice:Ht,onClose:yt})};B(J,p=>{r(j)&&p(Z)})}g(Bt,it),Gt()}export{Ee as component};
