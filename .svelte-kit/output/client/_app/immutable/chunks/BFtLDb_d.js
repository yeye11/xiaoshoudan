const o=()=>({id:crypto.randomUUID(),productName:"",specification:"",unit:"件",quantity:1,unitPrice:0,amount:0,note:""}),c=t=>({id:crypto.randomUUID(),invoiceNumber:s(),date:new Date().toISOString().split("T")[0],customerInfo:{name:"",address:"",phone:"",email:""},companyInfo:t,items:[o()],totalAmount:0,createdBy:"",status:"draft",type:"sale",paymentStatus:"unpaid",paidAmount:0}),s=()=>{const t=new Date,e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),n=String(t.getTime()).slice(-4);return`INV${e}${a}${r}${n}`},i=(t,e)=>Math.round(t*e*100)/100,u=t=>Math.round(t.reduce((e,a)=>e+a.amount,0)*100)/100,m=t=>t.toFixed(2),d=t=>{const e=[];return t.customerInfo.name.trim()||e.push("客户名称不能为空"),t.createdBy.trim()||e.push("制单人不能为空"),t.items.length===0&&e.push("至少需要一个商品项目"),t.items.forEach((a,r)=>{a.productName.trim()||e.push(`第${r+1}行商品名称不能为空`),a.quantity<=0&&e.push(`第${r+1}行数量必须大于0`),a.unitPrice<0&&e.push(`第${r+1}行单价不能为负数`)}),e},p=()=>({id:crypto.randomUUID(),name:"",category:"",initialDebt:0,phone:"",backupPhone:"",address:"",fax:"",email:"",notes:"",images:[],attachments:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0}),l=()=>({id:crypto.randomUUID(),name:"",barcode:"",category:"",specifications:[],attributes:[],unit:"件",prices:[],tags:[],notes:"",images:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0}),y=()=>({id:crypto.randomUUID(),name:"",isDefault:!1}),f=(t="sale")=>({id:crypto.randomUUID(),type:t,price:0,isDefault:t==="sale"}),g=(t,e="sale")=>{const a=t.prices.find(r=>r.type===e&&r.isDefault);return a?a.price:0};export{u as a,o as b,c,i as d,p as e,m as f,l as g,y as h,f as i,g as j,s as k,d as v};
