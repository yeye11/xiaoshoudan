import"./Bzak7iHL.js";import{i as gt}from"./BvNKmLqF.js";import{p as bt,l as ht,k as wt,m as _t,q as f,u as kt,f as O,i as l,s as i,r as s,t as g,g as n,v as u,j as z,b as L,w as b,e as c,n as lt,c as It,x as nt}from"./D2QV5ZPr.js";import{e as it,i as ct}from"./IKNvqO1Y.js";import{r as h}from"./CdHOzu_t.js";import{b as w}from"./fy4Fdf6-.js";import{b as Ct}from"./BHMMJb8Y.js";import{p as dt}from"./BR_REAzN.js";import{f as _,b as jt,d as Dt}from"./BFtLDb_d.js";var Mt=O("<option> </option>"),Bt=O('<tr class="hover:bg-gray-50 transition-colors"><td class="px-3 py-3 text-center text-sm text-gray-900"></td><td class="px-3 py-3"><input type="text" class="w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="请输入产品名称"/></td><td class="px-3 py-3"><input type="text" class="w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="规格型号"/></td><td class="px-3 py-3"><select class="w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></select></td><td class="px-3 py-3"><input type="number" min="0" step="0.01" class="w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right"/></td><td class="px-3 py-3"><input type="number" min="0" step="0.01" class="w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right"/></td><td class="px-3 py-3 text-right font-medium text-sm text-gray-900"> </td><td class="px-3 py-3"><div class="flex items-center space-x-1"><button class="p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed" title="上移"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button class="p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed" title="下移"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <button class="p-1 text-blue-400 hover:text-blue-600" title="复制"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button> <button class="p-1 text-red-400 hover:text-red-600 disabled:opacity-30 disabled:cursor-not-allowed" title="删除"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></td></tr>'),qt=O('<div class="mb-8"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-semibold text-gray-800">商品明细</h2> <div class="flex space-x-2"><button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> 添加商品</button></div></div> <div class="bg-white border border-gray-200 rounded-lg overflow-hidden"><div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50"><tr><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16">序号</th><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[150px]">产品名称</th><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]">规格型号</th><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20">单位</th><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24">数量</th><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28">单价</th><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28">金额</th><th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32">操作</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody><tfoot class="bg-gray-50"><tr><td colspan="6" class="px-3 py-4 text-right font-medium text-gray-900">合计：</td><td class="px-3 py-4 text-right font-bold text-lg text-gray-900"> </td><td class="px-3 py-4"></td></tr></tfoot></table></div></div> <div class="mt-2 text-xs text-gray-500"><p>快捷键：Ctrl + Enter 添加新行，Ctrl + Delete 删除当前行</p></div></div>');function zt(ut,k){bt(k,!1);const I=_t();let t=dt(k,"items",28,()=>[]),p=dt(k,"onItemsChange",8);const pt=["件","个","套","米","平方米","立方米","公斤","吨","箱","包","张","块"];function F(){t([...t(),jt()]),p()(t())}function G(e){t().length>1&&(t(t().filter((r,o)=>o!==e)),p()(t()))}function vt(e){const r={...t()[e]};r.id=crypto.randomUUID(),t([...t().slice(0,e+1),r,...t().slice(e+1)]),p()(t())}function J(e){const r=t()[e];r.amount=Dt(r.quantity,r.unitPrice),t([...t()]),p()(t())}function Q(e,r){r==="up"&&e>0?(o=>{var d=nt(o,2);t(t()[e]=d[0],!0),t(t()[e-1]=d[1],!0)})([t()[e-1],t()[e]]):r==="down"&&e<t().length-1&&(o=>{var d=nt(o,2);t(t()[e]=d[0],!0),t(t()[e+1]=d[1],!0)})([t()[e+1],t()[e]]),t([...t()]),p()(t())}function x(e,r){e.key==="Enter"&&e.ctrlKey?(e.preventDefault(),F()):e.key==="Delete"&&e.ctrlKey&&(e.preventDefault(),G(r))}ht(()=>f(t()),()=>{wt(I,t().reduce((e,r)=>e+r.amount,0))}),kt(),gt();var C=qt(),j=l(C),R=i(l(j),2),ft=l(R);s(R),s(j);var S=i(j,2),W=l(S),X=l(W),D=i(l(X));it(D,5,t,ct,(e,r,o)=>{var d=Bt(),tt=l(d);tt.textContent=o+1;var M=i(tt),B=l(M);h(B),s(M);var q=i(M),A=l(q);h(A),s(q);var E=i(q),H=l(E);g(()=>{n(r),u(()=>{})}),it(H,5,()=>pt,ct,(a,V)=>{var v=Mt(),yt=l(v,!0);s(v);var ot={};g(()=>{z(yt,n(V)),ot!==(ot=n(V))&&(v.value=(v.__value=n(V))??"")}),L(a,v)}),s(H),s(E);var K=i(E),m=l(K);h(m),s(K);var P=i(K),y=l(P);h(y),s(P);var N=i(P),mt=l(N);s(N);var et=i(N),rt=l(et),T=l(rt);T.disabled=o===0;var U=i(T,2),at=i(U,2),st=i(at,2);s(rt),s(et),s(d),g(a=>{z(mt,`¥${a??""}`),U.disabled=(f(t()),b(()=>o===t().length-1)),st.disabled=(f(t()),b(()=>t().length===1))},[()=>(f(_),n(r),b(()=>_(n(r).amount)))]),w(B,()=>n(r).productName,a=>(n(r).productName=a,u(()=>t()))),c("keydown",B,a=>x(a,o)),w(A,()=>n(r).specification,a=>(n(r).specification=a,u(()=>t()))),c("keydown",A,a=>x(a,o)),Ct(H,()=>n(r).unit,a=>(n(r).unit=a,u(()=>t()))),w(m,()=>n(r).quantity,a=>(n(r).quantity=a,u(()=>t()))),c("input",m,()=>J(o)),c("keydown",m,a=>x(a,o)),w(y,()=>n(r).unitPrice,a=>(n(r).unitPrice=a,u(()=>t()))),c("input",y,()=>J(o)),c("keydown",y,a=>x(a,o)),c("click",T,()=>Q(o,"up")),c("click",U,()=>Q(o,"down")),c("click",at,()=>vt(o)),c("click",st,()=>G(o)),L(e,d)}),s(D);var Y=i(D),Z=l(Y),$=i(l(Z)),xt=l($);s($),lt(),s(Z),s(Y),s(X),s(W),s(S),lt(2),s(C),g(e=>z(xt,`¥${e??""}`),[()=>(f(_),n(I),b(()=>_(n(I))))]),c("click",ft,F),L(ut,C),It()}export{zt as I};
