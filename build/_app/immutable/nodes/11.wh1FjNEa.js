import"../chunks/Bzak7iHL.js";import{i as ke}from"../chunks/XlqFUZ3x.js";import{p as Ce,o as Me,l as $e,i as Pe,f as g,a as Le,b as d,c as Se,g as e,e as D,j as O,h as i,k as f,r as o,s as n,u as l,t as w,d as m,x as je}from"../chunks/nbkepknC.js";import{i as y}from"../chunks/BcVSc5tD.js";import{e as E,i as G}from"../chunks/DVrF0WE5.js";import{r as Be}from"../chunks/2WVzPzKa.js";import{s as Ve}from"../chunks/BYJuMw6P.js";import{b as ze}from"../chunks/fLdq3W06.js";import{M as Ae}from"../chunks/4cH0hlCX.js";import{g as ae}from"../chunks/D9O0WCOO.js";var He=g('<div slot="actions"><button class="p-2 rounded-lg hover:bg-black hover:bg-opacity-10 transition-colors" aria-label="添加产品"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></button></div>'),De=g("<button> <!></button>"),Oe=g('<div class="bg-white border-b border-gray-200 p-4 space-y-3"><div class="relative"><input type="text" placeholder="输入产品名称、分类、条形码" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"/> <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <button class="absolute right-3 top-2.5 text-orange-500 font-medium">搜索</button></div> <div class="flex items-center space-x-2 overflow-x-auto"><span class="text-sm text-gray-600 whitespace-nowrap">排序:</span> <!></div></div>'),Te=g('<button class="bg-orange-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors">添加第一个产品</button>'),Fe=g('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg> <p class="text-gray-500 mb-4"> </p> <!></div>'),Ie=g('<div class="flex items-center"><span class="inline-block w-2 h-2 bg-orange-500 rounded-full mr-2"></span> </div>'),Je=g('<div class="flex items-center"><svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> </div>'),Ke=g('<div class="flex items-center"><svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zm12 0h2a1 1 0 001-1V6a1 1 0 00-1-1h-2a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1z"></path></svg> <span class="font-mono text-xs"> </span></div>'),Ne=g('<span class="inline-block bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded"> </span>'),qe=g('<span class="text-xs text-gray-500"> </span>'),Ee=g('<div class="flex flex-wrap gap-1 mt-2"><!> <!></div>'),Ge=g('<div class="bg-white rounded-lg p-4 shadow-sm border hover:shadow-md transition-shadow cursor-pointer"><div class="flex items-start justify-between"><div class="flex-1"><h3 class="font-medium text-gray-900 mb-1"> </h3> <div class="text-sm text-gray-600 space-y-1"><!> <!> <div class="flex items-center"><svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg> </div> <!></div> <!></div> <div class="text-right ml-4"><div class="text-xs text-gray-500">售价</div> <div class="text-sm font-medium text-orange-600"> </div> <div class="text-xs text-gray-500 mt-1"> </div></div></div></div>'),Qe=g('<div class="space-y-3"></div>'),Re=g('<!> <!> <div class="p-4"><!></div>',1);function oa(te,re){Ce(re,!1);let S=[],k=D([]),u=D(""),M=D("name"),P=D("asc"),T=D(!1);const se=[{id:"name",name:"产品名称"},{id:"category",name:"分类"},{id:"price",name:"价格"},{id:"createdAt",name:"创建时间"}];Me(()=>{oe()});const oe=()=>{try{const t=localStorage.getItem("products");t&&(S=JSON.parse(t),f(k,S),F())}catch(t){console.error("加载产品数据失败:",t)}},ie=()=>{if(!e(u).trim())f(k,S);else{const t=e(u).toLowerCase();f(k,S.filter(s=>{var r;return s.name.toLowerCase().includes(t)||s.category.toLowerCase().includes(t)||((r=s.barcode)==null?void 0:r.toLowerCase().includes(t))||s.tags.some(a=>a.toLowerCase().includes(t))}))}F()},F=()=>{e(k).sort((t,s)=>{let r,a;switch(e(M)){case"name":r=t.name.toLowerCase(),a=s.name.toLowerCase();break;case"category":r=t.category.toLowerCase(),a=s.category.toLowerCase();break;case"price":r=J(t),a=J(s);break;case"createdAt":r=new Date(t.createdAt).getTime(),a=new Date(s.createdAt).getTime();break;default:return 0}return typeof r=="string"?e(P)==="asc"?r.localeCompare(a):a.localeCompare(r):e(P)==="asc"?r-a:a-r})},J=t=>{const s=t.prices.find(r=>r.type==="sale"&&r.isDefault);return s?s.price:0},Q=t=>{const s=t.specifications.find(r=>r.isDefault);return s?s.name:""},R=()=>{f(T,!e(T)),e(T)||(f(u,""),f(k,S),F())},ne=t=>{e(M)===t?f(P,e(P)==="asc"?"desc":"asc"):(f(M,t),f(P,"asc")),F()},le=t=>{ae(`/mobile/products/${t}`)},K=()=>{ae("/mobile/products/new")},ve=t=>`¥${t.toFixed(2)}`;$e(()=>e(u),()=>{e(u)!==void 0&&ie()}),Pe(),ke();var U=Re(),W=Le(U);Ae(W,{title:"产品",showBack:!0,showSearch:!0,showActions:!0,backgroundColor:"bg-orange-500",$$events:{search:R,action:K},$$slots:{actions:(t,s)=>{var r=He(),a=i(r);o(r),O("click",a,K),d(t,r)}}});var X=n(W,2);{var ce=t=>{var s=Oe(),r=i(s),a=i(r);Be(a);var C=n(a,4);o(r);var $=n(r,2),_=n(i($),2);E(_,1,()=>se,G,(h,x)=>{var p=De(),j=i(p),N=n(j);{var I=B=>{var L=je();w(()=>m(L,e(P)==="asc"?"↑":"↓")),d(B,L)};y(N,B=>{e(M),e(x),l(()=>e(M)===e(x).id)&&B(I)})}o(p),w(()=>{Ve(p,1,`px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap transition-colors
                 ${e(M),e(x),l(()=>e(M)===e(x).id?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200")??""}`),m(j,`${e(x),l(()=>e(x).name)??""} `)}),O("click",p,()=>ne(e(x).id)),d(h,p)}),o($),o(s),ze(a,()=>e(u),h=>f(u,h)),O("click",C,R),d(t,s)};y(X,t=>{e(T)&&t(ce)})}var Y=n(X,2),de=i(Y);{var ge=t=>{var s=Fe(),r=n(i(s),2),a=i(r,!0);o(r);var C=n(r,2);{var $=_=>{var h=Te();O("click",h,K),d(_,h)};y(C,_=>{e(u)||_($)})}o(s),w(()=>m(a,e(u)?"暂时没有数据哦~":"还没有产品数据")),d(t,s)},me=t=>{var s=Qe();E(s,5,()=>e(k),G,(r,a)=>{var C=Ge(),$=i(C),_=i($),h=i(_),x=i(h,!0);o(h);var p=n(h,2),j=i(p);{var N=v=>{var c=Ie(),b=n(i(c));o(c),w(()=>m(b,` ${e(a),l(()=>e(a).category)??""}`)),d(v,c)};y(j,v=>{e(a),l(()=>e(a).category)&&v(N)})}var I=n(j,2);{var B=v=>{var c=Je(),b=n(i(c));o(c),w(V=>m(b,` ${V??""}`),[()=>(e(a),l(()=>Q(e(a))))]),d(v,c)};y(I,v=>{e(a),l(()=>Q(e(a)))&&v(B)})}var L=n(I,2),he=n(i(L));o(L);var fe=n(L,2);{var ue=v=>{var c=Ke(),b=n(i(c),2),V=i(b,!0);o(b),o(c),w(()=>m(V,(e(a),l(()=>e(a).barcode)))),d(v,c)};y(fe,v=>{e(a),l(()=>e(a).barcode)&&v(ue)})}o(p);var _e=n(p,2);{var xe=v=>{var c=Ee(),b=i(c);E(b,1,()=>(e(a),l(()=>e(a).tags.slice(0,3))),G,(z,A)=>{var H=Ne(),ye=i(H,!0);o(H),w(()=>m(ye,e(A))),d(z,H)});var V=n(b,2);{var we=z=>{var A=qe(),H=i(A);o(A),w(()=>m(H,`+${e(a),l(()=>e(a).tags.length-3)??""}`)),d(z,A)};y(V,z=>{e(a),l(()=>e(a).tags.length>3)&&z(we)})}o(c),d(v,c)};y(_e,v=>{e(a),l(()=>e(a).tags.length>0)&&v(xe)})}o(_);var Z=n(_,2),q=n(i(Z),2),pe=i(q,!0);o(q);var ee=n(q,2),be=i(ee,!0);o(ee),o(Z),o($),o(C),w(v=>{m(x,(e(a),l(()=>e(a).name))),m(he,` 单位: ${e(a),l(()=>e(a).unit)??""}`),m(pe,v),m(be,(e(a),l(()=>e(a).unit)))},[()=>(e(a),l(()=>ve(J(e(a)))))]),O("click",C,()=>le(e(a).id)),d(r,C)}),o(s),d(t,s)};y(de,t=>{e(k),l(()=>e(k).length===0)?t(ge):t(me,!1)})}o(Y),d(te,U),Se()}export{oa as component};
